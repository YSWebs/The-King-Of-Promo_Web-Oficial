<!DOCTYPE html>
<html>
<head>
    <title>Test de ConexiÃ³n</title>
</head>
<body>
    <h1>Test de ConexiÃ³n a Supabase</h1>
    <div id="status">Probando conexiÃ³n...</div>
    
    <script type="module">
        import { CONFIG, checkConfig } from './js/config.js';
        import { supabase, testConnection } from './js/supabase-client.js';
        
        async function runTests() {
            const status = document.getElementById('status');
            
            // Test 1: ConfiguraciÃ³n
            status.innerHTML += '<br>1. Verificando configuraciÃ³n...';
            if (!checkConfig()) {
                status.innerHTML += '<br><span style="color:red">âŒ ConfiguraciÃ³n incorrecta</span>';
                status.innerHTML += `<br>URL: ${CONFIG.supabase.url}`;
                status.innerHTML += `<br>Key: ${CONFIG.supabase.anonKey ? 'âœ“ Presente' : 'âœ— Faltante'}`;
                return;
            }
            status.innerHTML += '<br><span style="color:green">âœ“ ConfiguraciÃ³n OK</span>';
            
            // Test 2: ConexiÃ³n a Supabase
            status.innerHTML += '<br>2. Conectando a Supabase...';
            const connected = await testConnection();
            if (!connected) {
                status.innerHTML += '<br><span style="color:red">âŒ Error de conexiÃ³n</span>';
                return;
            }
            status.innerHTML += '<br><span style="color:green">âœ“ ConexiÃ³n exitosa</span>';
            
            // Test 3: AutenticaciÃ³n disponible
            status.innerHTML += '<br>3. Verificando autenticaciÃ³n...';
            const { data, error } = await supabase.auth.getSession();
            if (error) {
                status.innerHTML += `<br><span style="color:red">âŒ Error de auth: ${error.message}</span>`;
            } else {
                status.innerHTML += '<br><span style="color:green">âœ“ AutenticaciÃ³n disponible</span>';
            }
            
            status.innerHTML += '<br><br><strong>âœ… Â¡Todo listo! ğŸš€</strong>';
        }
        
        runTests();
    </script>
</body>
</html>